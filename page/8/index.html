<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>dev notes</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <link rel="stylesheet" href="/css/font_859455_eaq7v6w8ktj.css">
</head>

<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link">
                Home
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                Archives
            </a>
            

            
            <a href="/tags" class="header-nav-link">
                Tags
            </a>
            

            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">Frank Gutierrez's Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">Home</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">Archives</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">Tags</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">About</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/03/27/20170327-react-performance/">react performance</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-03-27</span>
                
            </div>
            <div class="post-content">
                
                    <h1 id="The-gist-of-performance-tuning"><a href="#The-gist-of-performance-tuning" class="headerlink" title="The gist of performance tuning"></a>The gist of performance tuning</h1><h2 id="Do-not-fix-what-isn’t-broken"><a href="#Do-not-fix-what-isn’t-broken" class="headerlink" title="Do not fix what isn’t broken"></a>Do not fix what isn’t broken</h2><p>Premature optimization is the root of all evil.</p>
<blockquote>
<p>Only work on optimizing if you can prove that a performance problem exists</p>
</blockquote>
<h2 id="Minimize-unnecessary-work"><a href="#Minimize-unnecessary-work" class="headerlink" title="Minimize unnecessary work"></a>Minimize unnecessary work</h2><p>re-rendering  </p>
<ul>
<li>sometimes react’s shallow-compare is not enough</li>
<li>re-rendering should only occur when props change</li>
</ul>
<p>shallow-compare</p>
<ul>
<li>why shallow-compare the 10k items in the list if you already know the result</li>
</ul>
<h2 id="Avoid-re-rendering-components-using-these-techniques"><a href="#Avoid-re-rendering-components-using-these-techniques" class="headerlink" title="Avoid re-rendering components using these techniques:"></a>Avoid re-rendering components using these techniques:</h2><ul>
<li>memoize from the lodash package</li>
<li>shouldComponentUpdate lifecycle method</li>
<li>HOCs from the recompose package</li>
<li>connect and createSelector from the redux and reselect packages</li>
</ul>
<h2 id="Pure-render-Anti-Patterns"><a href="#Pure-render-Anti-Patterns" class="headerlink" title="Pure render Anti-Patterns"></a>Pure render Anti-Patterns</h2><p>Avoid creating new refs in component props because they cause re-render.</p>
<p>Functions</p>
<ul>
<li><p>BAD: bind creates a new ref everytime  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyInput onChange=&#123;this.props.update.bind(this)&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>BAD: anonymous creates a new ref everytime  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyInput onChange=&#123;() =&gt; this.props.update()&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>GOOD: methods refs are constant  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyInput onChange=&#123;this.onChange&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Arrays</p>
<ul>
<li><p>BAD: a literal array creates a new ref everytime  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;SubComponent items=&#123;this.props.items || []&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>GOOD: array constants refs are constant  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;SubComponent items=&#123;this.props.items || EMPTY_ARRAY&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Objects</p>
<ul>
<li><p>BAD: a literal object creates a new ref everytime  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;SubComponent style=&#123;&#123;display: &apos;block&apos;&#125;&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>GOOD: object constants refs are constant  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;SubComponent style=&#123;MY_STYLES&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Avoid-re-rendering-pure-components"><a href="#Avoid-re-rendering-pure-components" class="headerlink" title="Avoid re-rendering pure components"></a>Avoid re-rendering pure components</h1><h2 id="Use-memoize-from-lodash"><a href="#Use-memoize-from-lodash" class="headerlink" title="Use memoize from lodash"></a>Use <code>memoize</code> from <code>lodash</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash/memoize'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  _render = memoize(<span class="function">(<span class="params">text</span>) =&gt;</span> &lt;div&gt;&#123;text&#125;&lt;<span class="regexp">/div&gt;)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render() &#123; return _render(this.props.text) &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Returning-false-from-shouldComponentUpdate"><a href="#Returning-false-from-shouldComponentUpdate" class="headerlink" title="Returning false from shouldComponentUpdate"></a>Returning false from <code>shouldComponentUpdate</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">PureComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  shouldComponentUpdate() &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Use-the-HOCs-in-Recompose"><a href="#Use-the-HOCs-in-Recompose" class="headerlink" title="Use the HOCs in Recompose"></a>Use the HOCs in <a href="https://github.com/acdlite/recompose" target="_blank" rel="noopener">Recompose</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this component will re-render only when props change</span></span><br><span class="line">@pure</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">      <span class="comment">///...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// this component will re-render only when prop1/prop2 changes</span></span><br><span class="line"><span class="comment">// it will not re-render if prop3 changes</span></span><br><span class="line">@onlyUpdateForKeys([<span class="string">'prop1'</span>, <span class="string">'prop2'</span>])</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">      <span class="comment">///...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// if you don't like ES7 decorators you can use them like this:</span></span><br><span class="line">MyComponent = pure(MyComponent)</span><br><span class="line">MyComponent = onlyUpdateForKeys([<span class="string">'prop1'</span>, <span class="string">'prop2'</span>])(MyComponent)</span><br></pre></td></tr></table></figure>
<h2 id="Use-Redux-and-connect"><a href="#Use-Redux-and-connect" class="headerlink" title="Use Redux and connect"></a>Use <code>Redux</code> and <code>connect</code></h2><p>connect </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// only re-renders when prop1 changes</span></span><br><span class="line"><span class="comment">// comparison is also done using shallowCompare</span></span><br><span class="line">connect(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    prop1: state.prop1</span><br><span class="line">&#125;))(SomeComponent)</span><br></pre></td></tr></table></figure>
<p>connect’s <code>gotcha</code> is calculated values </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this is ok</span></span><br><span class="line">connect(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    hasSomething: <span class="keyword">this</span>.prop1 === <span class="number">5</span> <span class="comment">// true===true</span></span><br><span class="line">&#125;))(SomeComponent)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this is NOT OK</span></span><br><span class="line"><span class="comment">// computed data is a different object every-time even if props were un-changed</span></span><br><span class="line">connect(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    computedData: &#123;</span><br><span class="line">        height: state.height,</span><br><span class="line">        width: state.width</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))(SomeComponent)</span><br></pre></td></tr></table></figure>
<p>Fixing connect’s gotcha with <a href="https://github.com/reactjs/reselect" target="_blank" rel="noopener">reselect</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createSelector&#125; <span class="keyword">from</span> <span class="string">'reselect'</span></span><br><span class="line"><span class="keyword">const</span> selectComputedData = createSelector(</span><br><span class="line">    state =&gt; state.height,</span><br><span class="line">    state =&gt; state.width,</span><br><span class="line">    (height, width) =&gt; (&#123;</span><br><span class="line">        height,</span><br><span class="line">        width</span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line">connect(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    computedData: selectComputedData(state)</span><br><span class="line">&#125;))(SomeComponent)</span><br></pre></td></tr></table></figure>
<h1 id="Pure-Render-Anti-Pattern"><a href="#Pure-Render-Anti-Pattern" class="headerlink" title="Pure Render Anti-Pattern"></a>Pure Render Anti-Pattern</h1><p>When using a pure component, pay special attention to arrays and functions. <code>Arrays and functions create new refs</code> so it’s up to you to create them only once and not during every render.</p>
<p>functions </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BAD – renders everytime due to new fn ref</span></span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">MyInput</span> <span class="attr">onChange</span>=<span class="string">&#123;this.props.update.bind(this)&#125;</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">// BAD – renders everytime due to new fn ref</span></span><br><span class="line"><span class="xml">render() &#123;</span></span><br><span class="line">  return &lt;MyInput onChange=&#123;() =&gt; this.props.update()&#125; /&gt;;</span><br><span class="line">&#125;</span><br><span class="line">// GOOD</span><br><span class="line">onChange () &#123;</span><br><span class="line">  this.props.doUpdate()</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">  return &lt;MyInput onChange=&#123;this.onChange&#125;/&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Arrays</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BAD – if there are no items, SubComponent will render every time!</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">SubComponent</span> <span class="attr">items</span>=<span class="string">&#123;this.props.items</span> || []&#125;/&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">// GOOD – This will avoid re-rendering</span></span><br><span class="line"><span class="xml">const EMPTY_ARRAY = []</span></span><br><span class="line"><span class="xml">render() &#123;</span></span><br><span class="line">    return &lt;SubComponent items=&#123;this.props.items || EMPTY_ARRAY&#125;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h1><p>This is a quick summary, but for more info and screen-shots read Benchling’s <a href="http://benchling.engineering/performance-engineering-with-react/" target="_blank" rel="noopener">part-1</a> and <a href="http://benchling.engineering/deep-dive-react-perf-debugging/" target="_blank" rel="noopener">part-2</a> blogs post about React performance engineering.</p>
<h2 id="Chrome-DevTools-Profiler"><a href="#Chrome-DevTools-Profiler" class="headerlink" title="Chrome DevTools Profiler"></a>Chrome DevTools Profiler</h2><p>Choose the Timeline tab in Chrome DevTools, and record while you perform an action in your application. The timeline will show you how much time the browser spent executing code, and how much time it spent rendering. Rendering here means the time that the browser itself takes to render the DOM on-screen — React render() calls are included in the JS execution time.</p>
<p>If you are doing Redux, use the slider in ReduxDevTools to repeat and record only the actions suspected to cause a slow re-render.</p>
<p>If you see that a React function like batchUpdates has a long total-time but short self-time, it means that there may be a performance issues with your React components, perhaps because they are rendering too often.<br>If this is the case we will use ReactPerf.</p>
<p><strong>React Perf</strong></p>
<p>Install the React Perf addon</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-addons-perf</span><br></pre></td></tr></table></figure>
<p>Import it into your project and expose it to the global context:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Perf from &apos;react-addons-perf&apos;</span><br><span class="line">window.Perf = Perf</span><br></pre></td></tr></table></figure>
<p>Once installed in your project, you can use the <a href="https://chrome.google.com/webstore/detail/react-perf/hacmcodfllhbnekmghgdlplbdnahmhmm" target="_blank" rel="noopener">React Perf Chrome Extension</a> to call Perf functions, or issue calls directly from the console.</p>
<ol>
<li>Call Perf.start()</li>
<li>Take some actions in your application. This will be recorded by Perf (use ReduxDevTools slider if possible)</li>
<li>Call Perf.stop()</li>
<li>Now that the action has been recorded, you can call 3 useful functions:<br><strong>printInclusive()</strong> — prints how much time is spent in each component<br><strong>printExclusive()</strong> — prints how much time is spent doing rendering for each component (not including componentsWillMount, componentDidMount, props processing…)<br><strong>printWasted()</strong> — prints how much time was wasted rendering components that didn’t actually change (rendering was done only in the VirtualDOM layer, and no changes occurred in the browser DOM).This is the most important function, as it will bring up components that should be pure and instances of the anti-patterns described above.<br><strong>printOperations()</strong> — will print the actual browser DOM manipulation, this is handy only when the browser spends too much time rendering.</li>
</ol>
<h2 id="Should-I-try-to-optimize"><a href="#Should-I-try-to-optimize" class="headerlink" title="Should I try to optimize?"></a>Should I try to optimize?</h2><p>react-dom is very fast by itself. You should only try to optimize once you have a problem that you can quantify with React Perf.</p>
<p>For example, consider a simple component like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Label = <span class="function">(<span class="params">&#123;text&#125;</span>) =&gt;</span> &lt;div className=<span class="string">'label'</span>&gt;&#123;text&#125;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>In this component, text probably never changes. Making it pure feels right, but this probably wont yield any noticeable improvement. Running shallowCompare will make about the same calculations as react-dom would, so by making the component pure you’ve just moved the processing to a different place.</p>
<p>So in other words…<br>Don’t imagine a future problem, wait till react-dom is not good enough by itself, it usually is.</p>
<h2 id="Bonus-Tips"><a href="#Bonus-Tips" class="headerlink" title="Bonus Tips"></a>Bonus Tips</h2><ul>
<li>NODE_DEV=production</li>
<li>Remove PropType checking with <code>babel-plugin-transform-react-remove-prop-types</code></li>
</ul>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>React/Redux Performance Tuning Tips – <a href="https://goo.gl/6DC5A7" target="_blank" rel="noopener">part1</a> – <a href="https://goo.gl/OHYN6E" target="_blank" rel="noopener">part2</a></li>
</ul>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/03/24/20170324-testing-todomvc-redux/">testing todomvc-redux</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-03-24</span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="Testing-Philosophy"><a href="#Testing-Philosophy" class="headerlink" title="Testing Philosophy"></a>Testing Philosophy</h2><ul>
<li>test public interface</li>
<li>unit tests should only use the unit</li>
<li>integration tests can test the unit works well with others</li>
</ul>
<h2 id="The-Tests"><a href="#The-Tests" class="headerlink" title="The Tests"></a>The Tests</h2><h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> TextInput <span class="keyword">from</span> <span class="string">'./TextInput'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    addTodo: PropTypes.func.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSave = <span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (text.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.props.addTodo(text)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;header className=<span class="string">'header'</span>&gt;</span><br><span class="line">        &lt;h1&gt;todos&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;TextInput</span></span><br><span class="line"><span class="regexp">          newTodo</span></span><br><span class="line"><span class="regexp">          handleSave=&#123;this.handleSave&#125;</span></span><br><span class="line"><span class="regexp">          placeholder='What needs to be done?' /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/header&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Header Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (8ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when saving with text.length &gt; 0</span><br><span class="line">      ✓ should call addTodo (4ms)</span><br><span class="line">    when saving with text.length = 0</span><br><span class="line">      ✓ should not call addTodo (3ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    TextInput</span><br><span class="line">      ✓ should set newTodo prop to `true` (2ms)</span><br><span class="line">      ✓ should set handleSave prop to `handleSave method` (2ms)</span><br><span class="line">      ✓ should set placeholder prop to `What needs to be done?` (3ms)</span><br></pre></td></tr></table></figure>
<h3 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> classnames <span class="keyword">from</span> <span class="string">'classnames'</span></span><br><span class="line"><span class="keyword">import</span> &#123; SHOW_ALL, SHOW_ACTIVE, SHOW_COMPLETED &#125; <span class="keyword">from</span> <span class="string">'../constants/TodoFilters'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FILTER_TITLES = &#123;</span><br><span class="line">  [SHOW_ALL]: <span class="string">'All'</span>,</span><br><span class="line">  [SHOW_ACTIVE]: <span class="string">'Active'</span>,</span><br><span class="line">  [SHOW_COMPLETED]: <span class="string">'Completed'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Footer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    completedCount: PropTypes.number.isRequired,</span><br><span class="line">    activeCount: PropTypes.number.isRequired,</span><br><span class="line">    handleSetFilter: PropTypes.func.isRequired,</span><br><span class="line">    filter: PropTypes.string.isRequired,</span><br><span class="line">    clearCompleted: PropTypes.func.isRequired,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderTodoCount () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; activeCount &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">const</span> itemWord = activeCount === <span class="number">1</span> ? <span class="string">'item'</span> : <span class="string">'items'</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;span className=<span class="string">'todo-count'</span>&gt;</span><br><span class="line">        &lt;strong&gt;&#123;activeCount || <span class="string">'No'</span>&#125;&lt;<span class="regexp">/strong&gt; &#123;itemWord&#125; left</span></span><br><span class="line"><span class="regexp">      &lt;/</span>span&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderFilterButtons (filter) &#123;</span><br><span class="line">    <span class="keyword">const</span> title = FILTER_TITLES[filter]</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">filter</span>: selectedFilter, handleSetFilter &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;a</span><br><span class="line">        className=&#123;classnames(&#123;<span class="attr">selected</span>: filter === selectedFilter&#125;)&#125;</span><br><span class="line">        style=&#123;&#123;<span class="attr">cursor</span>: <span class="string">'pointer'</span>&#125;&#125;</span><br><span class="line">        onClick=&#123;() =&gt; handleSetFilter(filter)&#125; &gt;</span><br><span class="line">        &#123;title&#125;</span><br><span class="line">      &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  renderClearButton () &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; completedCount, clearCompleted &#125; = this.props</span></span><br><span class="line"><span class="regexp">    if (completedCount) &#123;</span></span><br><span class="line"><span class="regexp">      return (</span></span><br><span class="line"><span class="regexp">        &lt;button className='clear-completed'</span></span><br><span class="line"><span class="regexp">          onClick=&#123;clearCompleted&#125; &gt;</span></span><br><span class="line"><span class="regexp">          Clear completed</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;footer className=<span class="string">'footer'</span>&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderTodoCount()&#125;</span><br><span class="line">        &lt;ul className=<span class="string">'filters'</span>&gt;</span><br><span class="line">          &#123;[SHOW_ALL, SHOW_ACTIVE, SHOW_COMPLETED].map(<span class="function"><span class="params">filter</span> =&gt;</span></span><br><span class="line">            &lt;li key=&#123;filter&#125;&gt;</span><br><span class="line">              &#123;<span class="keyword">this</span>.renderFilterButtons(filter)&#125;</span><br><span class="line">            &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">          )&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/u</span>l&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderClearButton()&#125;</span><br><span class="line">      &lt;<span class="regexp">/footer&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Footer Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (36ms)</span><br><span class="line">    when activeCount is 0</span><br><span class="line">      ✓ should render todo count as `No items left` (6ms)</span><br><span class="line">    when activeCount is 1</span><br><span class="line">      ✓ should render todo count as `1 item left` (6ms)</span><br><span class="line">    when activeCount is 2</span><br><span class="line">      ✓ should render todo count as `2 items left` (5ms)</span><br><span class="line">    when completedCount is 0</span><br><span class="line">      ✓ should not render clear-completed button (5ms)</span><br><span class="line">    when completedCount is &gt; 0</span><br><span class="line">      ✓ should render clear-completed button (5ms)</span><br><span class="line">    when filter prop matches filter link</span><br><span class="line">      ✓ should render filter link with class `selected` (7ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when clicking filter link</span><br><span class="line">      ✓ should call handleSetFilter with the correct filter (8ms)</span><br><span class="line">    when clicking clear-completed button</span><br><span class="line">      ✓ should call clearCompleted (5ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    filter links</span><br><span class="line">      ✓ should set onClick prop to `handleSetFilter` (11ms)</span><br><span class="line">    clear-completed button</span><br><span class="line">      ✓ should set onClick prop to `clearCompleted` (7ms)</span><br></pre></td></tr></table></figure>
<h3 id="MainSection"><a href="#MainSection" class="headerlink" title="MainSection"></a>MainSection</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">'./TodoItem'</span></span><br><span class="line"><span class="keyword">import</span> &#123; SHOW_ALL, SHOW_ACTIVE, SHOW_COMPLETED &#125; <span class="keyword">from</span> <span class="string">'../constants/TodoFilters'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TODO_FILTERS = &#123;</span><br><span class="line">  [SHOW_ALL]: <span class="function"><span class="params">()</span> =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">  [SHOW_ACTIVE]: <span class="function">(<span class="params">todo</span>) =&gt;</span> !todo.completed,</span><br><span class="line">  [SHOW_COMPLETED]: <span class="function">(<span class="params">todo</span>) =&gt;</span> todo.completed</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MainSection</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    todos: PropTypes.array.isRequired,</span><br><span class="line">    actions: PropTypes.object.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    filter: SHOW_ALL</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSetFilter = <span class="function">(<span class="params">filter</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;filter&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderCompleteAll (completedCount) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todos, actions &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">'checkbox'</span></span><br><span class="line">        className=<span class="string">'toggle-all'</span></span><br><span class="line">        checked=&#123;completedCount === todos.length&#125;</span><br><span class="line">        onChange=&#123;actions.completeAll&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderFooter (completedCount) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todos, actions &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Footer</span><br><span class="line">        completedCount=&#123;completedCount&#125;</span><br><span class="line">        activeCount=&#123;todos.length - completedCount&#125;</span><br><span class="line">        filter=&#123;<span class="keyword">this</span>.state.filter&#125;</span><br><span class="line">        handleSetFilter=&#123;<span class="keyword">this</span>.handleSetFilter&#125;</span><br><span class="line">        clearCompleted=&#123;actions.clearCompleted&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todos, actions &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">const</span> &#123; filter &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">const</span> completedCount = todos.reduce(<span class="function">(<span class="params">count, todo</span>) =&gt;</span> todo.completed ? count + <span class="number">1</span> : count, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> filteredTodos = todos.filter(TODO_FILTERS[filter])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;section className=<span class="string">'main'</span>&gt;</span><br><span class="line">        &#123;todos.length ? <span class="keyword">this</span>.renderCompleteAll(completedCount) : <span class="literal">null</span>&#125;</span><br><span class="line">        &lt;ul className=<span class="string">'todo-list'</span>&gt;</span><br><span class="line">          &#123;filteredTodos.map(<span class="function"><span class="params">todo</span> =&gt;</span></span><br><span class="line">            &lt;TodoItem key=&#123;todo.id&#125; todo=&#123;todo&#125; &#123;...actions&#125;/&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">        &#123;todos.length ? this.renderFooter(completedCount) : null&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>section&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">MainSection Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (17ms)</span><br><span class="line">    ✓ should render filtered todo list for all filters (22ms)</span><br><span class="line">    when we have todos</span><br><span class="line">      ✓ should render toggle-all checkbox (11ms)</span><br><span class="line">      ✓ should render footer (11ms)</span><br><span class="line">    when we have no todos</span><br><span class="line">      ✓ should not render toggle-all checkbox (2ms)</span><br><span class="line">      ✓ should not render footer (2ms)</span><br><span class="line">    when all todos are completed</span><br><span class="line">      ✓ should render toggle-all checkbox checked (9ms)</span><br><span class="line">    when all todos are not completed</span><br><span class="line">      ✓ should render toggle-all checkbox unchecked (9ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when clicking toggle-all</span><br><span class="line">      ✓ should call completeAll (8ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    toggle-all</span><br><span class="line">      ✓ should set onChange prop to `actions.completeAll` (10ms)</span><br><span class="line">      when not all todos are complete</span><br><span class="line">        ✓ should set checked prop to `false` (13ms)</span><br><span class="line">      when all todos are complete</span><br><span class="line">        ✓ should set checked prop to `true` (10ms)</span><br><span class="line">    todo-list-item</span><br><span class="line">      ✓ should set todo prop to `todo` (10ms)</span><br><span class="line">      ✓ should set props for each action (9ms)</span><br><span class="line">    footer</span><br><span class="line">      ✓ should set completedCount prop to `completedCount` (8ms)</span><br><span class="line">      ✓ should set activeCount prop to `activeCount` (9ms)</span><br><span class="line">      ✓ should set filter prop to `state.filter` (12ms)</span><br><span class="line">      ✓ should set handleSetFilter prop to `handleSetFilter method` (10ms)</span><br><span class="line">      ✓ should set clearCompleted prop to `actions.clearCompleted` (8ms)</span><br></pre></td></tr></table></figure>
<h3 id="TextInput"><a href="#TextInput" class="headerlink" title="TextInput"></a>TextInput</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> classnames <span class="keyword">from</span> <span class="string">'classnames'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TextInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    handleSave: PropTypes.func.isRequired,</span><br><span class="line">    newTodo: PropTypes.bool,</span><br><span class="line">    editing: PropTypes.bool,</span><br><span class="line">    text: PropTypes.string,</span><br><span class="line">    placeholder: PropTypes.string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    text: <span class="keyword">this</span>.props.text || <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">text</span>: e.target.value&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleBlur = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.props.newTodo) &#123;</span><br><span class="line">      <span class="keyword">this</span>.props.handleSave(e.target.value.trim())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ENTER_KEY = <span class="number">13</span></span><br><span class="line">    <span class="keyword">if</span> (e.which === ENTER_KEY) &#123;</span><br><span class="line">      <span class="keyword">this</span>.props.handleSave(e.target.value.trim())</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.props.newTodo) &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">text</span>: <span class="string">''</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">'text'</span></span><br><span class="line">        className=&#123;classnames(&#123;</span><br><span class="line">          edit: <span class="keyword">this</span>.props.editing,</span><br><span class="line">          <span class="string">'new-todo'</span>: <span class="keyword">this</span>.props.newTodo</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">        placeholder=&#123;<span class="keyword">this</span>.props.placeholder&#125;</span><br><span class="line">        value=&#123;<span class="keyword">this</span>.state.text&#125;</span><br><span class="line">        onChange=&#123;<span class="keyword">this</span>.handleChange&#125;</span><br><span class="line">        onBlur=&#123;<span class="keyword">this</span>.handleBlur&#125;</span><br><span class="line">        onKeyDown=&#123;<span class="keyword">this</span>.handleSubmit&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">TextInput Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (8ms)</span><br><span class="line">    when newTodo prop is true</span><br><span class="line">      ✓ should render with class new-todo (2ms)</span><br><span class="line">    when editing prop is true</span><br><span class="line">      ✓ should render with class edit (2ms)</span><br><span class="line">    when text prop is defined</span><br><span class="line">      ✓ should render with value matching (3ms)</span><br><span class="line">    when text prop is undefined</span><br><span class="line">      ✓ should render with value as an empty string (2ms)</span><br><span class="line">    when placeholder prop is defined</span><br><span class="line">      ✓ should render with placeholder matching (2ms)</span><br><span class="line">    when placeholder prop is undefined</span><br><span class="line">      ✓ should render with placeholder matching (2ms)</span><br><span class="line">  callbacks</span><br><span class="line">    input</span><br><span class="line">      when change event</span><br><span class="line">        ✓ should set input value (3ms)</span><br><span class="line">      when blur event</span><br><span class="line">        when newTodo is false</span><br><span class="line">          ✓ should call handleSave (2ms)</span><br><span class="line">        when newTodo is true</span><br><span class="line">          ✓ should not call handleSave (2ms)</span><br><span class="line">      when keydown event without ENTER key</span><br><span class="line">        ✓ should not call handleSave (2ms)</span><br><span class="line">      when keydown event with ENTER key</span><br><span class="line">        ✓ should call handleSave (2ms)</span><br><span class="line">        when newTodo is true</span><br><span class="line">          ✓ should clear input field (3ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    input</span><br><span class="line">      ✓ should set type prop to `text` (2ms)</span><br><span class="line">      ✓ should set placeholder prop to `placeholder` (2ms)</span><br><span class="line">      ✓ should set onChange prop to `handleChange method` (1ms)</span><br><span class="line">      ✓ should set onBlur prop to `handleBlur method` (2ms)</span><br><span class="line">      ✓ should set onKeyDown prop to `handleSubmit method` (1ms)</span><br><span class="line">      when text prop is defined</span><br><span class="line">        ✓ should set value prop to `text` (2ms)</span><br><span class="line">      when text prop is undefined</span><br><span class="line">        ✓ should set value prop to empty string (2ms)</span><br><span class="line">      when editing prop is true</span><br><span class="line">        ✓ should set class prop to include `edit` (2ms)</span><br><span class="line">      when newTodo prop is true</span><br><span class="line">        ✓ should set class prop to include `new-todo` (4ms)</span><br></pre></td></tr></table></figure>
<h3 id="TodoItem"><a href="#TodoItem" class="headerlink" title="TodoItem"></a>TodoItem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> TextInput <span class="keyword">from</span> <span class="string">'./TextInput'</span></span><br><span class="line"><span class="keyword">import</span> classnames <span class="keyword">from</span> <span class="string">'classnames'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoItem</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    todo: PropTypes.object.isRequired,</span><br><span class="line">    completeTodo: PropTypes.func.isRequired,</span><br><span class="line">    editTodo: PropTypes.func.isRequired,</span><br><span class="line">    deleteTodo: PropTypes.func.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    editing: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleDoubleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">editing</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSave = <span class="function">(<span class="params">id, text</span>) =&gt;</span> &#123;</span><br><span class="line">    (text.length)</span><br><span class="line">      ? <span class="keyword">this</span>.props.editTodo(&#123;id, text&#125;)</span><br><span class="line">      : <span class="keyword">this</span>.props.deleteTodo(id)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">editing</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getTodoElement () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todo, completeTodo, deleteTodo &#125; = <span class="keyword">this</span>.props</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.editing) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;TextInput</span><br><span class="line">          text=&#123;todo.text&#125;</span><br><span class="line">          editing=&#123;<span class="keyword">this</span>.state.editing&#125;</span><br><span class="line">          handleSave=&#123;(text) =&gt; <span class="keyword">this</span>.handleSave(todo.id, text)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=<span class="string">'view'</span>&gt;</span><br><span class="line">          &lt;input</span><br><span class="line">            type=<span class="string">'checkbox'</span></span><br><span class="line">            className=<span class="string">'toggle'</span></span><br><span class="line">            checked=&#123;todo.completed&#125;</span><br><span class="line">            onChange=&#123;() =&gt; completeTodo(todo.id)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;label onDoubleClick=&#123;<span class="keyword">this</span>.handleDoubleClick&#125;&gt;</span><br><span class="line">            &#123;todo.text&#125;</span><br><span class="line">          &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">          &lt;button className='destroy'</span></span><br><span class="line"><span class="regexp">            onClick=&#123;() =&gt; deleteTodo(todo.id)&#125; /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render () &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;li className=&#123;classnames(&#123;</span></span><br><span class="line"><span class="regexp">        editing: this.state.editing,</span></span><br><span class="line"><span class="regexp">        completed: this.props.todo.completed</span></span><br><span class="line"><span class="regexp">      &#125;)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &#123;this.getTodoElement()&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>li&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">TodoItem Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (12ms)</span><br><span class="line">    when in edit-mode</span><br><span class="line">      ✓ should render todo in edit mode (7ms)</span><br><span class="line">      ✓ should render li with class &quot;editing&quot; (4ms)</span><br><span class="line">    when in view mode</span><br><span class="line">      ✓ should render todo in view mode (9ms)</span><br><span class="line">    when the todo is complete</span><br><span class="line">      ✓ should render li with class &quot;completed&quot; (4ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when in edit mode</span><br><span class="line">      when saving with text.length &gt; 0</span><br><span class="line">        ✓ should call editTodo and exit edit mode (8ms)</span><br><span class="line">      when saving with text.length = 0</span><br><span class="line">        ✓ should call deleteTodo and exit edit mode (7ms)</span><br><span class="line">    when in view mode</span><br><span class="line">      when toggle is clicked</span><br><span class="line">        ✓ should call completeTodo (3ms)</span><br><span class="line">      when label is doubleclicked</span><br><span class="line">        ✓ should enter edit mode (4ms)</span><br><span class="line">      when delete button is clicked</span><br><span class="line">        ✓ should call deleteTodo (3ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    when in edit mode</span><br><span class="line">      TextInput</span><br><span class="line">        ✓ should set text prop to `todo.text` (4ms)</span><br><span class="line">        ✓ should set editing prop to `state.editing` (5ms)</span><br><span class="line">        ✓ should set handleSave prop to an anonymous function (4ms)</span><br><span class="line">    when in view mode</span><br><span class="line">      todo complete toggle</span><br><span class="line">        ✓ should set type prop to `checkbox` (4ms)</span><br><span class="line">        ✓ should set checked prop to `todo.completed` (4ms)</span><br><span class="line">        ✓ should set onChange prop to an anonymous function (3ms)</span><br><span class="line">      todo label</span><br><span class="line">        ✓ should set onDoubleClick prop to `handleDoubleClick method` (4ms)</span><br><span class="line">      todo destroy button</span><br><span class="line">        ✓ should set onClick prop to an anonymous function (2ms)</span><br></pre></td></tr></table></figure>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/03/24/20170324-testing-todomvc-mobx/">testing todomvc-mobx</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-03-24</span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="Testing-Philosophy"><a href="#Testing-Philosophy" class="headerlink" title="Testing Philosophy"></a>Testing Philosophy</h2><ul>
<li>test public interface</li>
<li>unit tests should only use the unit</li>
<li>integration tests can test the unit works well with others</li>
</ul>
<h2 id="The-Tests"><a href="#The-Tests" class="headerlink" title="The Tests"></a>The Tests</h2><h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">"mobx-react"</span></span><br><span class="line"><span class="keyword">import</span> Entry <span class="keyword">from</span> <span class="string">'./Entry'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    addTodo: React.PropTypes.func.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSave = <span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (text) &#123;</span><br><span class="line">      <span class="keyword">this</span>.props.addTodo(text)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;header className=<span class="string">"header"</span>&gt;</span><br><span class="line">        &lt;h1&gt;todos&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Entry handleSave=&#123;this.handleSave&#125; /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/header&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default observer(Header)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Header Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should contain correct children (28ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when saving text having length &gt; 0</span><br><span class="line">      ✓ should call addTodo with text (5ms)</span><br><span class="line">    when saving text having length = 0</span><br><span class="line">      ✓ should not call addTodo (2ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    Entry component</span><br><span class="line">      ✓ should set handleSave prop to `handleSave method` (4ms)</span><br></pre></td></tr></table></figure>
<h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ENTER_KEY = <span class="number">13</span></span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    handleSave: React.PropTypes.func.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">'text'</span></span><br><span class="line">        ref=<span class="string">'newField'</span></span><br><span class="line">        className=<span class="string">'new-todo'</span></span><br><span class="line">        placeholder=<span class="string">'What needs to be done?'</span></span><br><span class="line">        onKeyDown=&#123;<span class="keyword">this</span>.handleKeyDown&#125;</span><br><span class="line">        autoFocus=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleKeyDown = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.which === ENTER_KEY) &#123;</span><br><span class="line">      event.preventDefault()</span><br><span class="line">      <span class="keyword">this</span>.props.handleSave(event.target.value.trim())</span><br><span class="line">      <span class="keyword">const</span> node = ReactDOM.findDOMNode(<span class="keyword">this</span>.refs.newField)</span><br><span class="line">      node.value = <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Entry Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (8ms)</span><br><span class="line">    when onKeyDown event with ENTER key</span><br><span class="line">      ✓ should clear input component value (4ms)</span><br><span class="line">  callbacks</span><br><span class="line">    input component</span><br><span class="line">      when onKeyDown event with ENTER key</span><br><span class="line">        ✓ should call handleSave callback (3ms)</span><br><span class="line">      when onKeyDown event without ENTER key</span><br><span class="line">        ✓ should not call handleSave callback (3ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    input component</span><br><span class="line">      ✓ should set type prop to `text` (3ms)</span><br><span class="line">      ✓ should set placeholder prop to `What needs to be done?` (2ms)</span><br><span class="line">      ✓ should set onKeyDown prop to `handleKeyDown method` (3ms)</span><br></pre></td></tr></table></figure>
<h3 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Footer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    todo: React.PropTypes.object.isRequired,</span><br><span class="line">    view: React.PropTypes.object.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todo, view &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">if</span> (todo.todos.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;footer className=<span class="string">'footer'</span> data-spec=<span class="string">'footer'</span>&gt;</span><br><span class="line">        &lt;span className=<span class="string">'todo-count'</span>&gt;</span><br><span class="line">          &lt;strong&gt;&#123;todo.activeTodoCount || <span class="string">'No'</span>&#125;&lt;<span class="regexp">/strong&gt; &#123;todo.activeTodoWord&#125; left</span></span><br><span class="line"><span class="regexp">        &lt;/</span>span&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ul className=<span class="string">'filters'</span>&gt;</span><br><span class="line">          &#123;view.todoFilters.map(<span class="keyword">this</span>.renderFilterLink)&#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        &#123; !!todo.completedCount &amp;&amp;</span></span><br><span class="line"><span class="regexp">          &lt;button</span></span><br><span class="line"><span class="regexp">            className='clear-completed'</span></span><br><span class="line"><span class="regexp">            onClick=&#123;todo.clearCompleted&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Clear completed</span></span><br><span class="line"><span class="regexp">          &lt;/</span>button&gt;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;<span class="regexp">/footer&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  renderFilterLink = (filter, index) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; todoFilter &#125; = this.props.view</span></span><br><span class="line"><span class="regexp">    const url = ['', 'active', 'completed'][index]</span></span><br><span class="line"><span class="regexp">    const caption = ['All', 'Active', 'Completed'][index]</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;li key=&#123;index&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;a href=&#123;'#/</span><span class="string">' + url&#125;</span></span><br><span class="line"><span class="string">          className=&#123;filter ===  todoFilter ? '</span>selected<span class="string">' : '</span><span class="string">'&#125;&gt;</span></span><br><span class="line"><span class="string">          &#123;caption&#125;</span></span><br><span class="line"><span class="string">        &lt;/a&gt;</span></span><br><span class="line"><span class="string">        &#123;'</span> <span class="string">'&#125;</span></span><br><span class="line"><span class="string">      &lt;/li&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Footer Component</span><br><span class="line">  rendering</span><br><span class="line">    when todos exist</span><br><span class="line">      ✓ should contain correct children (19ms)</span><br><span class="line">    when no todos exist</span><br><span class="line">      ✓ should not render (4ms)</span><br><span class="line">    when activeTodoCount is 0</span><br><span class="line">      ✓ should render todo count as &quot;No items left&quot; (6ms)</span><br><span class="line">    when activeCount is 1</span><br><span class="line">      ✓ should render todo count as &quot;1 item left&quot; (5ms)</span><br><span class="line">    when activeCount is 2</span><br><span class="line">      ✓ should render todo count as &quot;2 items left&quot; (4ms)</span><br><span class="line">    when completedCount is 0</span><br><span class="line">      ✓ should not render clear-completed button (7ms)</span><br><span class="line">    when completedCount is &gt; 0</span><br><span class="line">      ✓ should render clear-completed button (5ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when clicking on filter link</span><br><span class="line">      ✓ should navigate to the correct url (4ms)</span><br><span class="line">    when clicking on clear-completed button</span><br><span class="line">      ✓ should call clearCompleted (11ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    filter link</span><br><span class="line">      when filter link matches todoFilter</span><br><span class="line">        ✓ should set className prop to `selected` (6ms)</span><br><span class="line">    clear-completed button</span><br><span class="line">      ✓ should set onClick prop to `todo.clearCompleted` (5ms)</span><br></pre></td></tr></table></figure>
<h3 id="MainSection"><a href="#MainSection" class="headerlink" title="MainSection"></a>MainSection</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">'./TodoItem'</span></span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MainSection</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    todo: React.PropTypes.object.isRequired,</span><br><span class="line">    view: React.PropTypes.object.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todo, view &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">if</span> (todo.todos.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;section className=<span class="string">"main"</span>&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"checkbox"</span></span><br><span class="line">          className=<span class="string">"toggle-all"</span></span><br><span class="line">          checked=&#123;todo.activeTodoCount === <span class="number">0</span>&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; todo.toggleAll(e.target.checked)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;ul className=<span class="string">"todo-list"</span>&gt;</span><br><span class="line">          &#123;todo.visibleTodos.map(<span class="function"><span class="params">todo</span> =&gt;</span></span><br><span class="line">            &lt;TodoItem</span><br><span class="line">              key=&#123;todo.id&#125;</span><br><span class="line">              todo=&#123;todo&#125;</span><br><span class="line">              view=&#123;view&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>section&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MainSection Component</span><br><span class="line">  rendering</span><br><span class="line">    ✓ should render correctly (11ms)</span><br><span class="line">    when we have todos</span><br><span class="line">      ✓ should render toggle-all checkbox (7ms)</span><br><span class="line">    when we have no todos</span><br><span class="line">      ✓ should not render toggle-all checkbox (2ms)</span><br><span class="line">    when all todos are completed</span><br><span class="line">      ✓ should render toggle-all checkbox checked (5ms)</span><br><span class="line">    when all todos are not completed</span><br><span class="line">      ✓ should render toggle-all checkbox not checked (5ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when clicking toggle-all</span><br><span class="line">      ✓ should call toggleAll (9ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    toggle-all</span><br><span class="line">      ✓ should set onChange prop to `toggleAll` (6ms)</span><br><span class="line">      when todos are complete</span><br><span class="line">        ✓ should set checked prop to `true`  (5ms)</span><br><span class="line">      when todos are not complete</span><br><span class="line">        ✓ should set checked prop to `false` (6ms)</span><br><span class="line">    TodoItem of todo-list</span><br><span class="line">      ✓ should set todo prop to `todo` (7ms)</span><br><span class="line">      ✓ should set view prop to `view` (6ms)</span><br></pre></td></tr></table></figure>
<h3 id="TodoItem"><a href="#TodoItem" class="headerlink" title="TodoItem"></a>TodoItem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;observable&#125; <span class="keyword">from</span> <span class="string">'mobx'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ESCAPE_KEY = <span class="number">27</span></span><br><span class="line"><span class="keyword">const</span> ENTER_KEY = <span class="number">13</span></span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    todo: React.PropTypes.object.isRequired,</span><br><span class="line">    view: React.PropTypes.object.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @observable editText = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">  renderEditMode = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;input</span><br><span class="line">      type=<span class="string">'text'</span></span><br><span class="line">      ref=<span class="string">'editField'</span></span><br><span class="line">      className=<span class="string">'edit'</span></span><br><span class="line">      value=&#123;<span class="keyword">this</span>.editText&#125;</span><br><span class="line">      onBlur=&#123;<span class="keyword">this</span>.handleSubmit&#125;</span><br><span class="line">      onChange=&#123;<span class="keyword">this</span>.handleChange&#125;</span><br><span class="line">      onKeyDown=&#123;<span class="keyword">this</span>.handleKeyDown&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  )</span><br><span class="line">  renderViewMode = <span class="function">(<span class="params">todo</span>) =&gt;</span> (</span><br><span class="line">    &lt;div className=<span class="string">'view'</span>&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">'checkbox'</span></span><br><span class="line">        className=<span class="string">'toggle'</span></span><br><span class="line">        checked=&#123;todo.completed&#125;</span><br><span class="line">        onChange=&#123;todo.toggle&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;label onDoubleClick=&#123;<span class="keyword">this</span>.handleDoubleClick&#125;&gt;</span><br><span class="line">        &#123;todo.title&#125;</span><br><span class="line">      &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button className='destroy' onClick=&#123;todo.destroy&#125; /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">  </span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123;todo, view&#125; = this.props</span></span><br><span class="line"><span class="regexp">    const isEditing = view.todoBeingEdited === todo</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;li className=&#123;[</span></span><br><span class="line"><span class="regexp">        todo.completed ? 'completed' : '',</span></span><br><span class="line"><span class="regexp">        isEditing ? 'editing' : ''</span></span><br><span class="line"><span class="regexp">      ].join(' ')&#125;&gt;</span></span><br><span class="line"><span class="regexp">      </span></span><br><span class="line"><span class="regexp">        &#123; isEditing </span></span><br><span class="line"><span class="regexp">          ? this.renderEditMode()</span></span><br><span class="line"><span class="regexp">          : this.renderViewMode(todo)</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">      &lt;/</span>li&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleDoubleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> todo = <span class="keyword">this</span>.props.todo</span><br><span class="line">    <span class="keyword">this</span>.props.view.todoBeingEdited = todo</span><br><span class="line">    <span class="keyword">this</span>.editText = todo.title</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSubmit = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; todo, view &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">const</span> val = event.target.value.trim()</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">      todo.setTitle(val)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      todo.destroy()</span><br><span class="line">    &#125;</span><br><span class="line">    view.todoBeingEdited = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleKeyDown = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.which === ESCAPE_KEY) &#123;</span><br><span class="line">      <span class="keyword">this</span>.editText = <span class="keyword">this</span>.props.todo.title</span><br><span class="line">      <span class="keyword">this</span>.props.view.todoBeingEdited = <span class="literal">null</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.which === ENTER_KEY) &#123;</span><br><span class="line">      <span class="keyword">this</span>.handleSubmit(event)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleChange = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.editText = event.target.value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">TodoItem Component</span><br><span class="line">  rendering</span><br><span class="line">    when in view mode</span><br><span class="line">      ✓ should render correctly (12ms)</span><br><span class="line">    when in edit mode</span><br><span class="line">      ✓ should render correctly (8ms)</span><br><span class="line">    when todo is not double-clicked</span><br><span class="line">      ✓ should render without className `editing` (3ms)</span><br><span class="line">    when todo is double-clicked</span><br><span class="line">      ✓ should render with className `editing` (6ms)</span><br><span class="line">    when todo is complete</span><br><span class="line">      ✓ should render li with class &quot;completed&quot; (4ms)</span><br><span class="line">  callbacks</span><br><span class="line">    when in edit mode</span><br><span class="line">      when onBlur and text.length &gt; 0</span><br><span class="line">        ✓ should call setTitle callback and exit edit mode (9ms)</span><br><span class="line">      when onBlur and text.length = 0</span><br><span class="line">        ✓ should call deleteTodo and exit edit mode (6ms)</span><br><span class="line">      when onChange</span><br><span class="line">        ✓ should call handleChange method (6ms)</span><br><span class="line">      when onKeyDown with ENTER key</span><br><span class="line">        ✓ should call handleKeyDown and handleSubmit methods (7ms)</span><br><span class="line">      when onKeyDown with ESC key</span><br><span class="line">        ✓ should call handleChange method (9ms)</span><br><span class="line">      when onKeyDown without ESC or ENTER key</span><br><span class="line">        ✓ should call handleChange method but not execute anything (7ms)</span><br><span class="line">    when in view mode</span><br><span class="line">      when clicking toggle checkbox</span><br><span class="line">        ✓ should call toggle callback (5ms)</span><br><span class="line">      when doubleclicking label</span><br><span class="line">        ✓ should enter edit mode (5ms)</span><br><span class="line">      when clicking delete button</span><br><span class="line">        ✓ should call deleteTodo (5ms)</span><br><span class="line">  props passed to components</span><br><span class="line">    toggle checkbox</span><br><span class="line">      ✓ should set type prop to `checkbox` (3ms)</span><br><span class="line">      ✓ should set checked prop to `todo.completed` (3ms)</span><br><span class="line">      ✓ should set onChange prop to `todo.toggle` (4ms)</span><br><span class="line">    label</span><br><span class="line">      ✓ should set onDoubleClick prop to `handleDoubleClick method` (4ms)</span><br><span class="line">    destroy button</span><br><span class="line">      ✓ should set onClick prop to `destroy` (3ms)</span><br><span class="line">    edit field</span><br><span class="line">      ✓ should set value prop to `todo.title` (7ms)</span><br><span class="line">      ✓ should set onBlur prop to `handleSubmit method` (6ms)</span><br><span class="line">      ✓ should set onChange prop to `handleChange method` (6ms)</span><br><span class="line">      ✓ should set onKeyDown prop to `handleKeyDown method` (5ms)</span><br></pre></td></tr></table></figure>

                
            </div>
        </article>
    
</div>
<div class="paginator">
    
        
        <a class="prev" href="/page/7/">
            <i class="iconfont icon-prev"></i>
            Prev
        </a>
        
        
        <a class="next" href="/page/9/">
            Next
            <i class="iconfont icon-next"></i>
        </a>
        
    
</div>

    </div>
</div>
<footer class="footer-social">
    
    <a class="social-link" target="_blank" href="https://github.com/dearfrankg">
        <i class="iconfont icon-github"></i>
    </a>
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2018
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://github.com/dearfrankg">Frank Gutierrez</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
