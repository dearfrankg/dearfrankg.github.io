<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>dev notes</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <link rel="stylesheet" href="/css/font_859455_eaq7v6w8ktj.css">
</head>

<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link">
                Home
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                Archives
            </a>
            

            
            <a href="/tags" class="header-nav-link">
                Tags
            </a>
            

            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">Frank Gutierrez's Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">Home</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">Archives</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">Tags</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">About</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/02/09/20170210-mongodb/">locking down mongodb</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-02-09</span>
                
            </div>
            <div class="post-content">
                
                    <blockquote>
<p>Update May 3 2017</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// start db in auth mode</span><br><span class="line">mcs</span><br><span class="line"></span><br><span class="line">// login (recommended)</span><br><span class="line">export MONGO_PASS=abc123</span><br><span class="line">mc connect -u username -p $MONGO_PASS MyServer/myapp</span><br><span class="line"></span><br><span class="line">// other ways to login</span><br><span class="line">// mc connect mongodb://user:pass@localhost:27017/myapp</span><br><span class="line">// mc connect -u user -p pass MyServer/myapp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// exit CLI</span><br><span class="line">&gt; exit</span><br><span class="line"></span><br><span class="line">// shutdown db</span><br><span class="line">mcq -y</span><br></pre></td></tr></table></figure>
<p>I gots hacked!!!<br>So… I have to learn to secure the old db.</p>
<h2 id="Securing-the-DB"><a href="#Securing-the-DB" class="headerlink" title="Securing the DB"></a>Securing the DB</h2><p>Keep in mind I use <code>mongoctl</code> for <code>mongodb</code> management</p>
<h3 id="Get-security-fixes"><a href="#Get-security-fixes" class="headerlink" title="Get security fixes"></a>Get security fixes</h3><p>upgrade to the latest version for the latest security fixes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ mc list-versions</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">VERSION              EDITION              LOCATION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">3.0.12               community            /Users/frankg/mongodb/mongodb-osx-x86_64-community-3.0.12</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ mc install-mongodb 3.4.2</span><br><span class="line">[...]</span><br><span class="line"></span><br><span class="line">$ mc list-versions</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">VERSION              EDITION              LOCATION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">3.0.12               community            /Users/frankg/mongodb/mongodb-osx-x86_64-community-3.0.12</span><br><span class="line">3.4.2                community            /Users/frankg/mongodb/mongodb-osx-x86_64-community-3.4.2</span><br></pre></td></tr></table></figure>
<h3 id="Create-and-Manage-users"><a href="#Create-and-Manage-users" class="headerlink" title="Create and Manage users"></a>Create and Manage users</h3><h4 id="The-admin-user"><a href="#The-admin-user" class="headerlink" title="The admin user"></a>The admin user</h4><p>An admin user can do almost anything.  The key word there is almost.</p>
<blockquote>
<p>admin users cannot login to all databases.<br>you should create the users that need to login to each database<br>I think the reason they did this is to prevent admin passwords from being used on the internet</p>
</blockquote>
<p>admin users can login to the admin database or login without specifying a database.</p>
<p>create an admin user</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mcc</span><br><span class="line"></span><br><span class="line">MongoDB server version: 3.4.2</span><br><span class="line">&gt; use admin</span><br><span class="line"></span><br><span class="line">&gt; db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: &quot;frankg&quot;,</span><br><span class="line">    pwd: &quot;xyz123&quot;,</span><br><span class="line">    roles: [ &apos;root&apos; ]</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>view a user’s roles</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mcc</span><br><span class="line"></span><br><span class="line">MongoDB server version: 3.4.2</span><br><span class="line">&gt; use admin</span><br><span class="line"></span><br><span class="line">&gt; db.getUser(&quot;frankg&quot;)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;_id&quot; : &quot;admin.frankg&quot;,</span><br><span class="line">  &quot;user&quot; : &quot;frankg&quot;,</span><br><span class="line">  &quot;db&quot; : &quot;admin&quot;,</span><br><span class="line">  &quot;roles&quot; : [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;role&quot; : &quot;root&quot;,</span><br><span class="line">      &quot;db&quot; : &quot;admin&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="The-non-admin-user"><a href="#The-non-admin-user" class="headerlink" title="The non admin user"></a>The non admin user</h4><p>You will need to create users for each database if you want to login to that database.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mcc</span><br><span class="line"></span><br><span class="line">MongoDB server version: 3.4.2</span><br><span class="line">&gt; use myAppDb</span><br><span class="line"></span><br><span class="line">&gt; db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">   user: &quot;appUser&quot;,</span><br><span class="line">   pwd: &quot;appPass&quot;,</span><br><span class="line">   roles: [ &quot;readWrite&quot;]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="change-a-user’s-pasword"><a href="#change-a-user’s-pasword" class="headerlink" title="change a user’s pasword"></a>change a user’s pasword</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mcc</span><br><span class="line"></span><br><span class="line">MongoDB server version: 3.4.2</span><br><span class="line">&gt; use admin</span><br><span class="line"></span><br><span class="line">&gt; db.changeUserPassword(&quot;frankg&quot;, &quot;xyz123&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="Securing-the-server-and-password"><a href="#Securing-the-server-and-password" class="headerlink" title="Securing the server and password"></a>Securing the server and password</h3><p>Here are the commands that I use to manage the database:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">alias mc=&apos;mongoctl&apos;</span><br><span class="line">alias mcs=&apos;mc start --auth MyServer &apos;</span><br><span class="line"># NOTE: don&apos;t bother trying to use the useless built in rest server!!</span><br><span class="line">alias mcq=&apos;mc stop -u frankg -p $MONGO_PASS MyServer&apos;</span><br><span class="line">alias mcst=&apos;mc status -u frankg -p $MONGO_PASS MyServer&apos;</span><br><span class="line">alias mcc=&apos;mc connect -u frankg -p $MONGO_PASS MyServer&apos;</span><br></pre></td></tr></table></figure>
<h4 id="securing-the-server"><a href="#securing-the-server" class="headerlink" title="securing the server"></a>securing the server</h4><p>The command used to start the server is:</p>
<p><code>alias mcs=&#39;mc start --auth MyServer&#39;</code></p>
<p>The key option for security is <code>--auth</code>.  This puts the database in secure mode requiring usernames and passwords.</p>
<h4 id="securing-the-password"><a href="#securing-the-password" class="headerlink" title="securing the password"></a>securing the password</h4><p>Notice that I do not use the <code>password</code> in this commands script.  Because that’s easy for a hacker to find. For example see this command:</p>
<p><code>alias mcq=&#39;mc stop -u frankg -p $MONGO_PASS MyServer&#39;</code></p>
<p>The password is represented by an environment variable <code>$MONGO_PASS</code></p>
<p>If a user opens a terminal and tries to use the mongo client with the <code>mcc</code> command it will not work.  In order to make it work you need to create the environment variable in your terminal like so:</p>
<p><code>export MONGO_PASS=xyz123</code></p>
<p>Now you can use the <code>mcc</code> command and work with the database.</p>
<p>To prevent others from access, close that terminal window when you’re done.</p>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/02/09/20170209-web-animation/">web animation</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-02-09</span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="The-gist-of-it…"><a href="#The-gist-of-it…" class="headerlink" title="The gist of it…"></a>The gist of it…</h2><p>Use <code>transform</code> instead of changing CSS properties like <code>width</code> or <code>margin</code></p>
<p>transform will let you leverage the GPU and takes little effort.</p>
<p>with transform you can:</p>
<ul>
<li><code>position</code>: transform: translateX()</li>
<li><code>scale</code>: transform: scale()</li>
<li><code>rotation</code>: transform: rotate()</li>
<li><code>opacity</code>: opacity: 0…1</li>
</ul>
<p>The expensive operation in the browser is <code>layout</code>.  When you change the <code>width</code> or <code>margin</code> of a <code>div</code> you cause the browser to have to calculate <code>layout</code> for all the elements contained in that <code>div</code>.  This is a hugely expensive operation that will cause your animation to be <code>janky</code>.</p>
<h2 id="Checking-the-results-in-the-debugger"><a href="#Checking-the-results-in-the-debugger" class="headerlink" title="Checking the results in the debugger"></a>Checking the results in the debugger</h2><p>Using the <code>timeline</code> section of the <code>dev tools</code> you can check the load on the <code>cpu</code> and <code>paint</code> operations.  They should be very very low.  If they are high you’re doing it wrong.</p>
<h2 id="Animation-techniques"><a href="#Animation-techniques" class="headerlink" title="Animation techniques"></a>Animation techniques</h2><h3 id="technique-1"><a href="#technique-1" class="headerlink" title="technique 1"></a>technique 1</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* BAD */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: width .<span class="number">35s</span>, margin-left .<span class="number">35s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mysidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(100vw - 255px);</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">255px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here our <code>SideBar</code> component has the <code>sidebar</code> class and starts off with some properties.  When we add the <code>mysidebar</code> class to it, then the properties get overridden by the <code>mysidebar</code> class.  The speed of the transition is controlled with the <code>transition</code> property under the <code>sidebar</code> class.</p>
<h3 id="technique-2"><a href="#technique-2" class="headerlink" title="technique 2"></a>technique 2</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* GOOD */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#mybox</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: move <span class="number">3s</span> ease infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> move &#123;</span><br><span class="line">  50% &#123;</span><br><span class="line">     <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100px);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here a box identified by the <code>#mybox</code> id, will animate back and forth infinitely.</p>
<p>animation property:</p>
<ul>
<li><code>move</code> is the animation name</li>
<li><code>3s</code> take 3 seconds to complete the animation</li>
<li><code>ease</code> the flow of the movement.   others: (ease-in, ease-in-out, linear)</li>
<li><code>infinite</code> a flag to indicate not to stop</li>
</ul>
<h2 id="references"><a href="#references" class="headerlink" title="references"></a>references</h2><ul>
<li><a href="https://goo.gl/dEKgfL" target="_blank" rel="noopener">Animating with Translate - a Paul Irish codepen</a></li>
<li><a href="https://goo.gl/OzKCVa" target="_blank" rel="noopener">High Performance Animations</a></li>
<li><a href="https://goo.gl/cyBAJO" target="_blank" rel="noopener">10 principles for smooth web animations</a></li>
</ul>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/2017/01/25/20170125-todomvc/">todomvc deep understanding</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2017-01-25</span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">├── actions</span><br><span class="line">│   └── index.js</span><br><span class="line">├── components</span><br><span class="line">│   ├── Footer.js</span><br><span class="line">│   ├── Header.js</span><br><span class="line">│   ├── MainSection.js</span><br><span class="line">│   ├── TextInput.js</span><br><span class="line">│   └── TodoItem.js</span><br><span class="line">├── constants</span><br><span class="line">│   ├── ActionTypes.js</span><br><span class="line">│   └── TodoFilters.js</span><br><span class="line">├── containers</span><br><span class="line">│   └── App.js</span><br><span class="line">├── index.js</span><br><span class="line">└── reducers</span><br><span class="line">    ├── index.js</span><br><span class="line">    └── todos.js</span><br></pre></td></tr></table></figure>
<h2 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h2><p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const store = createStore(reducers)</span><br><span class="line"></span><br><span class="line">render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125; &gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>containers/App.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const App = (&#123;todos, actions&#125;) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Header addTodo=&#123;actions.addTodo&#125; /&gt;</span><br><span class="line">      &lt;MainSection todos=&#123;todos&#125; actions=&#123;actions&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">App.propTypes = &#123;</span><br><span class="line">  todos: PropTypes.array.isRequired,</span><br><span class="line">  actions: PropTypes.object.isRequired</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mapStateToProps = (state) =&gt; (&#123;</span><br><span class="line">  todos: state.todos</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps = (dispatch) =&gt; (&#123;</span><br><span class="line">  actions: bindActionCreators(todoActions, dispatch)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  mapDispatchToProps</span><br><span class="line">)(App)</span><br></pre></td></tr></table></figure>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p>constants</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">export const ADD_TODO = &apos;ADD_TODO&apos;</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>
<p>actions</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">export const addTodo = (text) =&gt; (&#123;type: ADD_TODO, text&#125;)</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>
<p>reducers/index</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">const rootReducer = combineReducers(&#123;</span><br><span class="line">  todos</span><br><span class="line">&#125;)</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>
<p>reducers/todos</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">const initialState = [&#123;...&#125;]</span><br><span class="line"></span><br><span class="line">const todos = (state = initialState, action) =&gt; &#123;</span><br><span class="line">  switch(action.type) &#123;</span><br><span class="line">    [...]</span><br><span class="line">    case DELETE_TODO:</span><br><span class="line">      return state.filter(todo =&gt; todo.id !== action.id)</span><br><span class="line">    [...]</span><br></pre></td></tr></table></figure>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><ul>
<li>Header imports:<ul>
<li>TextInput</li>
</ul>
</li>
<li>Header props needed:<ul>
<li>addTodo: add todo to list</li>
</ul>
</li>
<li>Header methods:<ul>
<li>handleSave: wraps addTodo to prevent empty todos</li>
</ul>
</li>
<li>Header renders: a header containing a title and TextInput<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;header className=&quot;header&quot;&gt;</span><br><span class="line">    &lt;h1&gt;todos&lt;/h1&gt;</span><br><span class="line">    &lt;TextInput newTodo</span><br><span class="line">      onSave=&#123;this.handleSave&#125;</span><br><span class="line">      placeholder=&quot;What needs to be done?&quot; /&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="TextInput"><a href="#TextInput" class="headerlink" title="TextInput"></a>TextInput</h3><ul>
<li>TextInput imports:<ul>
<li>classnames</li>
</ul>
</li>
<li>TextInput props needed:<ul>
<li>onSave: func.isRequired</li>
<li>text: string</li>
<li>placeholder: string</li>
<li>editing: bool</li>
<li>newTodo: bool</li>
</ul>
</li>
<li>TextInput local state:<ul>
<li>text: this.props.text || ‘’</li>
</ul>
</li>
<li>TextInput methods:<ul>
<li>handleSubmit: save on enter-key, clear local state when new-todo</li>
<li>handleChange: update local state</li>
<li>handleBlur: save when not new-todo</li>
</ul>
</li>
<li>TextInput conditional classes:<ul>
<li>edit: this.props.editing,</li>
<li>‘new-todo’: this.props.newTodo</li>
</ul>
</li>
<li>TextInput render: an input tag<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;input className=&#123;</span><br><span class="line">    classnames(&#123;</span><br><span class="line">      edit: this.props.editing,</span><br><span class="line">      &apos;new-todo&apos;: this.props.newTodo</span><br><span class="line">    &#125;)&#125;</span><br><span class="line">    type=&quot;text&quot;</span><br><span class="line">    placeholder=&#123;this.props.placeholder&#125;</span><br><span class="line">    autoFocus=&quot;true&quot;</span><br><span class="line">    value=&#123;this.state.text&#125;</span><br><span class="line">    onBlur=&#123;this.handleBlur&#125;</span><br><span class="line">    onChange=&#123;this.handleChange&#125;</span><br><span class="line">    onKeyDown=&#123;this.handleSubmit&#125; /&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="MainSection"><a href="#MainSection" class="headerlink" title="MainSection"></a>MainSection</h3><ul>
<li>MainSection imports:<ul>
<li>TodoItem</li>
<li>Footer</li>
<li>TodoFilters</li>
</ul>
</li>
<li>MainSection props needed:<ul>
<li>todos: array</li>
<li>actions: object</li>
</ul>
</li>
<li>MainSection local state:<ul>
<li>filter: SHOW_ALL</li>
</ul>
</li>
<li><p>MainSection methods:</p>
<ul>
<li>handleClearCompleted: wraps clearCompleted (not necessary)</li>
<li>handleSetFilter: reset filter on local state</li>
<li><p>renderToggleAll: render toggleAll checkbox in header area via css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (todos.length) &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;input className=&quot;toggle-all&quot;</span><br><span class="line">           type=&quot;checkbox&quot;</span><br><span class="line">           checked=&#123;completedCount === todos.length&#125;</span><br><span class="line">           onChange=&#123;actions.completeAll&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>renderFooter: prepare props and render Footer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (todos.length) &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;Footer</span><br><span class="line">      completedCount=&#123;completedCount&#125;</span><br><span class="line">      activeCount=&#123;activeCount&#125;</span><br><span class="line">      filter=&#123;filter&#125;</span><br><span class="line">      onClearCompleted=&#123;clearCompleted&#125;</span><br><span class="line">      onSetFilter=&#123;this.handleSetFilter&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>MainSection conditional classes:</p>
<ul>
<li>none</li>
</ul>
</li>
<li>MainSection render: a section containing toggle-all, todo-list, footer<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;section className=&quot;main&quot;&gt;</span><br><span class="line">    &#123;this.renderToggleAll(completedCount)&#125;</span><br><span class="line">    &lt;ul className=&quot;todo-list&quot;&gt;</span><br><span class="line">      &#123;filteredTodos.map(todo =&gt;</span><br><span class="line">        &lt;TodoItem key=&#123;todo.id&#125; todo=&#123;todo&#125; &#123;...actions&#125; /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &#123;this.renderFooter(completedCount)&#125;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="TodoItem"><a href="#TodoItem" class="headerlink" title="TodoItem"></a>TodoItem</h3><ul>
<li>TodoItem imports:<ul>
<li>classnames</li>
<li>TextInput</li>
</ul>
</li>
<li>TodoItem props needed:<ul>
<li>todo: object</li>
<li>completeTodo: func</li>
<li>editTodo: func</li>
<li>deleteTodo: func</li>
</ul>
</li>
<li>TodoItem local state:<ul>
<li>editing: false</li>
</ul>
</li>
<li><p>TodoItem methods:</p>
<ul>
<li>handleDoubleClick: set editing to true on local state</li>
<li>handleSave: when text editTodo else deleteTodo then set editing to false on local state</li>
<li>getTodoElement: when editing render todo in edit-mode else non-edit-mode<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">if (this.state.editing) &#123;</span><br><span class="line">  element = (</span><br><span class="line">    &lt;TodoTextInput text=&#123;todo.text&#125;</span><br><span class="line">                   editing=&#123;this.state.editing&#125;</span><br><span class="line">                   onSave=&#123;(text) =&gt; this.handleSave(todo.id, text)&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  element = (</span><br><span class="line">    &lt;div className=&quot;view&quot;&gt;</span><br><span class="line">      &lt;input className=&quot;toggle&quot;</span><br><span class="line">             type=&quot;checkbox&quot;</span><br><span class="line">             checked=&#123;todo.completed&#125;</span><br><span class="line">             onChange=&#123;() =&gt; completeTodo(todo.id)&#125; /&gt;</span><br><span class="line">      &lt;label onDoubleClick=&#123;this.handleDoubleClick&#125;&gt;</span><br><span class="line">        &#123;todo.text&#125;</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">      &lt;button className=&quot;destroy&quot;</span><br><span class="line">              onClick=&#123;() =&gt; deleteTodo(todo.id)&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>TodoItem conditional classes:</p>
<ul>
<li>completed: todo.completed,</li>
<li>editing: this.state.editing</li>
</ul>
</li>
<li>TodoItem render:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;li className=&#123;classnames(&#123;</span><br><span class="line">    completed: todo.completed,</span><br><span class="line">    editing: this.state.editing</span><br><span class="line">  &#125;)&#125;&gt;</span><br><span class="line">    &#123;element&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h3><ul>
<li>Footer imports:<ul>
<li>classnames</li>
<li>TodoFilters</li>
</ul>
</li>
<li>Footer variables:<ul>
<li>FILTER_TITLES: object with labels for filter buttons</li>
</ul>
</li>
<li>Footer props needed:<ul>
<li>completedCount: number</li>
<li>activeCount: number</li>
<li>filter: string</li>
<li>onClearCompleted: func</li>
<li>onSetFilter: func</li>
</ul>
</li>
<li>Footer local state:<ul>
<li>none</li>
</ul>
</li>
<li><p>Footer methods:</p>
<ul>
<li><p>renderTodoCount: display filter count for 0/1/&gt;1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;span className=&quot;todo-count&quot;&gt;</span><br><span class="line">    &lt;strong&gt;&#123;activeCount || &apos;No&apos;&#125;&lt;/strong&gt; &#123;itemWord&#125; left</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>renderFilterLink: setup filter buttons</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;a className=&#123;classnames(&#123; selected: filter === selectedFilter &#125;)&#125;</span><br><span class="line">     style=&#123;&#123; cursor: &apos;pointer&apos; &#125;&#125;</span><br><span class="line">     onClick=&#123;() =&gt; onSetFilter(filter)&#125;&gt;</span><br><span class="line">    &#123;title&#125;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>renderClearButton: render clear button when completed todos exist</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (completedCount &gt; 0) &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;button className=&quot;clear-completed&quot;</span><br><span class="line">            onClick=&#123;onClearCompleted&#125; &gt;</span><br><span class="line">      Clear completed</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Footer conditional classes:</p>
<ul>
<li>selected: filter === selectedFilter –––&gt; renderFilterLink</li>
</ul>
</li>
<li>Footer render:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">  &lt;footer className=&quot;footer&quot;&gt;</span><br><span class="line">    &#123;this.renderTodoCount()&#125;</span><br><span class="line">    &lt;ul className=&quot;filters&quot;&gt;</span><br><span class="line">      &#123;[ SHOW_ALL, SHOW_ACTIVE, SHOW_COMPLETED ].map(filter =&gt;</span><br><span class="line">        &lt;li key=&#123;filter&#125;&gt;</span><br><span class="line">          &#123;this.renderFilterLink(filter)&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &#123;this.renderClearButton()&#125;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>

                
            </div>
        </article>
    
</div>
<div class="paginator">
    
        
        <a class="prev" href="/page/11/">
            <i class="iconfont icon-prev"></i>
            Prev
        </a>
        
        
        <a class="next" href="/page/13/">
            Next
            <i class="iconfont icon-next"></i>
        </a>
        
    
</div>

    </div>
</div>
<footer class="footer-social">
    
    <a class="social-link" target="_blank" href="https://github.com/dearfrankg">
        <i class="iconfont icon-github"></i>
    </a>
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2018
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://github.com/dearfrankg">Frank Gutierrez</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
